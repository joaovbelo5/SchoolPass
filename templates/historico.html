{% extends "base.html" %}

{% block title %}Histórico de Registros{% endblock %}

{% block content %}
<div class="container-fluid py-4" style="max-width:900px; width:100%; margin:auto;">
    <div class="text-center mb-4">
        <h2 class="fw-bold mb-1" style="color: #14532d; letter-spacing: 1px;">
            <i class="bi bi-clock-history me-2"></i>Histórico de Registros
        </h2>
        <div class="text-muted" style="font-size:0.98em;">Consulte os acessos registrados por data</div>
    </div>
    <form method="POST" class="d-flex flex-row align-items-center gap-2 mb-4 bg-white p-2 rounded-4 shadow-sm justify-content-center" style="max-width:500px; margin:auto;">
        <label for="data" class="form-label mb-0">Data:</label>
        <select name="data" id="data" class="form-select form-select-sm shadow-none" style="max-width:180px; border-radius:8px;">
            {% for arquivo in arquivos %}
                <option value="{{ arquivo.split('.')[0] }}" {% if data_selecionada == arquivo.split('.')[0] %}selected{% endif %}>{{ arquivo.split('.')[0] }}</option>
            {% endfor %}
        </select>
        <button type="submit" class="btn btn-success btn-sm px-3"><i class="bi bi-search me-1"></i>Ver</button>
    </form>
    {% if registros %}
    <div class="table-responsive bg-white p-2 rounded-4 shadow-sm">
        <table class="table table-hover align-middle mb-0" style="border-radius:12px; overflow:hidden;">
            <thead style="background:#e9f5ee;">
                <tr>
                    <th class="text-nowrap">Código</th>
                    <th class="text-nowrap">Nome</th>
                    <th class="text-nowrap">Turma</th>
                    <th class="text-nowrap">Turno</th>
                    <th class="text-nowrap">Data/Hora</th>
                    <th class="text-nowrap">Tipo</th>
                </tr>
            </thead>
            <tbody>
                {% for registro in registros %}
                <tr>
                    <td>{{ registro['codigo'] }}</td>
                    <td>{{ registro['nome'] }}</td>
                    <td>{{ registro['turma'] }}</td>
                    <td>{{ registro['turno'] }}</td>
                    <td>{{ registro['data/hora'] }}</td>
                    <td>{{ registro['tipo'] }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% elif data_selecionada %}
    <div class="alert alert-warning text-center mt-4">Nenhum registro encontrado para a data selecionada.</div>
    {% endif %}
</div>
<!-- Bootstrap Icons CDN -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.min.css">
{% endblock %}