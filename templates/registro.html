{% extends "base.html" %}
{% block content %}
<div class="container py-4 kiosk-container">
    <div class="row justify-content-center">
        <div class="col-12">

            <!-- Search Card (Compact) -->
            <div class="card mb-5" style="max-width: 600px; margin: 0 auto;">
                <div class="card-body p-3">
                    <form method="POST" class="d-flex gap-3">
                        <div class="flex-grow-1">
                            <input type="text" name="codigo" class="form-control form-control-lg bg-light"
                                placeholder="Digite ou escaneie o cÃ³digo..." autofocus required autocomplete="off"
                                style="font-size: 1.25rem;">
                        </div>
                        <button type="submit" class="btn btn-primary btn-lg px-4 fw-bold">
                            <i class="bi bi-search"></i>
                        </button>
                    </form>
                </div>
            </div>

            {% if mensagem and not aluno %}
            <!-- Error Message Only -->
            <div class="alert alert-danger d-inline-flex align-items-center justify-content-center w-100 py-4"
                role="alert">
                <i class="bi bi-exclamation-triangle-fill fs-2 me-3"></i>
                <div class="fw-bold fs-3">
                    {{ mensagem }}
                </div>
            </div>
            {% endif %}

            {% if aluno %}
            <!-- Kiosk Student Card -->
            <div class="kiosk-card">
                <div class="row align-items-center">

                    <!-- Photo Column -->
                    <div class="col-md-5 d-flex justify-content-center">
                        <div class="kiosk-photo-container mb-0">
                            <img src="{{ url_for('static', filename='fotos/' + aluno.Foto) }}" alt="Foto do Aluno"
                                class="kiosk-photo">
                        </div>
                    </div>

                    <!-- Info Column -->
                    <div class="col-md-7 text-start ps-md-4">
                        <!-- Huge Name -->
                        <div class="kiosk-name text-start mb-2">
                            {{ aluno.Nome }}
                        </div>

                        <!-- Large Details -->
                        <div class="kiosk-detail text-start mb-4">
                            <span class="badge bg-light text-dark me-2 border">{{ aluno.Turma }}</span>
                            <span class="badge bg-light text-dark border">{{ aluno.Turno }}</span>
                        </div>

                        <!-- Massive Status Indicator -->
                        <div>
                            {% if aluno.Permissao == 'Sim' %}
                            <div class="kiosk-status bg-success text-white">
                                <i class="bi bi-check-circle-fill" style="font-size: 2.5rem;"></i>
                                <span>PERMITIDO</span>
                            </div>
                            {% else %}
                            <div class="kiosk-status bg-danger text-white">
                                <i class="bi bi-x-circle-fill" style="font-size: 2.5rem;"></i>
                                <span>PROIBIDO</span>
                            </div>
                            {% endif %}
                        </div>
                    </div>

                </div>
            </div>
            {% endif %}

        </div>
    </div>
</div>

{% if alerta %}
<audio autoplay>
    <source src="{{ url_for('static', filename='alert.mp3') }}" type="audio/mpeg">
</audio>
{% endif %}

<style>
    @media (min-width: 768px) {
        .border-end-md {
            border-right: 1px solid var(--border-color);
        }
    }

    .object-fit-cover {
        object-fit: cover;
    }
</style>
{% endblock %}