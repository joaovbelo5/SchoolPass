{% extends 'base.html' %}
{% block title %}Carômetro{% endblock %}
{% block content %}
<div class="carometro-page">
    <h2 class="titulo-carometro d-print-none"><i class="bi bi-people"></i> Carômetro</h2>
    <form method="POST" class="filtro-carometro d-print-none">
    <select name="turma" class="filtro-select" style="width:100%;max-width:100%;">
            <option value="">Todas as Turmas</option>
            {% for turma in turmas %}
                <option value="{{ turma }}" {% if turma == turma_selecionada %}selected{% endif %}>{{ turma }}</option>
            {% endfor %}
        </select>
        <button type="submit" class="btn salvar"><i class="bi bi-funnel"></i> Filtrar</button>
        <button type="button" class="btn btn-secondary d-print-none" style="white-space:nowrap;" onclick="window.print()">
            <i class="bi bi-printer"></i> Imprimir
        </button>
    </form>
    <div class="carometro-grid">
        {% for aluno in alunos %}
        <div class="carometro-card">
            <img src="{{ url_for('static', filename='fotos/' ~ aluno['Foto']) }}" class="carometro-foto" alt="Foto do Aluno">
            <div class="carometro-info">
                <h3>{{ aluno['Nome'] }}</h3>
                <p><strong>Turma:</strong> {{ aluno['Turma'] }}</p>
                <p><strong>Código:</strong> {{ aluno['Codigo'] }}</p>
                <p><strong>Turno:</strong> {{ aluno['Turno'] }}</p>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
<style>
.carometro-page {
    max-width: 1200px;
    margin: 0 auto;
    padding: 24px 8px;
}
.titulo-carometro {
    color: #14532d;
    font-weight: bold;
    margin-bottom: 18px;
    font-size: 2rem;
}
.filtro-carometro {
    display: flex;
    gap: 10px;
    margin-bottom: 24px;
}
.filtro-select {
    padding: 8px 12px;
    border-radius: 6px;
    border: 2px solid #14532d;
    font-size: 1rem;
}
.carometro-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
    gap: 16px;
}
.carometro-card {
    background: #fff;
    border: 1.5px solid #d1e7dd;
    border-radius: 10px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.07);
    padding: 10px 6px 8px 6px;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-width: 0;
}
.carometro-foto {
    width: 110px;
    height: 145px;
    object-fit: cover;
    border-radius: 8px;
    border: 2px solid #14532d;
    margin-bottom: 8px;
}
.carometro-info h3 {
    font-size: 1.08rem;
    margin-bottom: 4px;
    color: #14532d;
    font-weight: 600;
    text-align: center;
}
.carometro-info p {
    font-size: 0.97rem;
    margin: 2px 0;
    text-align: center;
}
@media (max-width: 700px) {
    .carometro-grid {
        grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
        gap: 10px;
    }
    .carometro-foto {
        width: 90px;
        height: 110px;
    }
}
@media print {
    body, html {
        background: #fff !important;
        color: #000 !important;
        margin: 0 !important;
        padding: 0 !important;
    }
    .d-print-none, .filtro-carometro, .titulo-carometro { display: none !important; }
    .carometro-page {
        max-width: 100vw !important;
        padding: 0 !important;
        margin: 0 !important;
    }
    .carometro-grid {
        display: grid !important;
        grid-template-columns: repeat(5, 1fr) !important;
        gap: 0 !important;
        width: 100vw !important;
        margin: 0 !important;
        padding: 0 !important;
    }
    .carometro-card {
        border: 1px solid #000 !important;
        border-radius: 0 !important;
        box-shadow: none !important;
        padding: 2px 0 2px 0 !important;
        margin: 0 !important;
        min-width: 0 !important;
        width: 100% !important;
        page-break-inside: avoid !important;
        display: flex !important;
        flex-direction: column !important;
        align-items: center !important;
        justify-content: flex-start !important;
        text-align: center !important;
    }
    .carometro-foto {
        width: 70px !important;
        height: 90px !important;
        object-fit: cover !important;
        border: none !important;
        margin-bottom: 2px !important;
    }
    .carometro-info h3 {
        font-size: 0.85rem !important;
        margin: 2px 0 1px 0 !important;
        font-weight: bold !important;
    }
    .carometro-info p {
        font-size: 0.7rem !important;
        margin: 1px 0 !important;
    }
}
</style>
{% endblock %}